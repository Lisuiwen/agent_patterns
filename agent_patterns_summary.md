# 智能体设计模式 (Agentic Design Patterns) 全景解析

基于《智能体设计模式》及业界最佳实践，我们将 21 种核心模式分为四大类：**核心架构类**、**推理增强类**、**系统稳健类**、**高级交互类**。

## 一、 核心架构类 (Architectural Patterns)
*定义智能体的基本工作流结构和组织方式。*

| 序号 | 模式名称 | 英文名 | 核心逻辑 | 适用场景 | 代码案例参考 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | **提示链** | Prompt Chaining | **线性流水线**：A -> B -> C，上一步输出是下一步输入。 | 文本翻译、数据清洗、多步骤生成（大纲->正文）。 | `chaining_agent.ts` |
| 2 | **路由** | Routing | **条件分发**：根据意图分类，将任务派发给特定专家。 | 客服系统（退款/技术/咨询）、复杂指令集分流。 | `routing_agent.ts` |
| 3 | **并行化** | Parallelization | **并发执行**：同时运行多个任务，最后聚合结果。 | 投票系统、多角度辩论、批量处理数据。 | `parallel_agent.ts` |
| 6 | **规划** | Planning | **拆解-执行**：生成 Todo List，逐个击破，动态调整。 | 复杂问题求解（如“写一个游戏”）、长期任务。 | `planning_agent.ts` |
| 7 | **多智能体协作** | Multi-Agent | **分工合作**：不同角色的智能体（如监督者、工人）协同。 | 模拟公司流程（PM->Dev->QA）、复杂仿真。 | `collaboration_agent.ts` |
| 4 | **反思** | Reflection | **生成-评价-修改**：引入“批评家”角色，自我迭代优化。 | 高质量写作、代码生成（Reflexion）、解决幻觉。 | `reflexion_agent.ts` |

## 二、 推理与认知增强类 (Cognitive & Inference Patterns)
*增强模型解决复杂问题的“脑力”。*

| 序号 | 模式名称 | 英文名 | 核心逻辑 | 适用场景 | 代码案例参考 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 17 | **推理技术 (CoT/ToT)** | Inference Techniques | **思维树/思维链**：展示思考过程，探索多条路径并回溯。 | 数学题、逻辑谜题、战略决策分析。 | `tot_agent.ts` |
| 21 | **探索与发现** | Exploration | **假设-验证**：主动提出假设，搜集信息验证，发现新知。 | 科研助手、市场趋势挖掘、未知领域探索。 | `exploration_agent.ts` |
| 9 | **学习与适应** | Learning | **经验库**：任务结束后总结经验，存入库中供下次参考。 | 个人助理、需要越用越顺手的系统。 | `learning_agent.ts` |
| 8 | **记忆管理** | Memory | **上下文压缩**：摘要长对话，管理短期/长期记忆。 | 陪伴型 AI、长期角色扮演、无限长度对话。 | `memory_agent.ts` |
| 5 | **工具使用** | Tool Use | **ReAct**：推理 -> 选择工具 -> 执行 -> 观察结果。 | 几乎所有需要联网、查库、操作 API 的 Agent。 | *(包含在 ReAct 逻辑中)* |

## 三、 系统稳健与工程化类 (Robustness & Engineering Patterns)
*确保系统在生产环境稳定、高效、安全运行。*

| 序号 | 模式名称 | 英文名 | 核心逻辑 | 适用场景 | 代码案例参考 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 12 | **异常处理** | Exception Handling | **重试与降级**：Try-Catch 机制，失败时切换备用模型。 | 生产级应用、依赖不稳定 API 的任务。 | `robustness_agent.ts` |
| 16 | **资源感知优化** | Resource-Aware | **成本路由**：简单任务用小模型，难任务用大模型。 | 成本敏感型应用、高并发 C 端应用。 | `resource_agent.ts` |
| 18 | **护栏/安全** | Guardrails | **输入/输出审计**：增加审查节点，拦截违规内容。 | 企业级应用、合规要求严格的场景。 | `guardrails_agent.ts` |
| 11 | **目标设定与监控** | Goal Monitoring | **KPI 追踪**：将 Planning 细化为指标追踪，检查进度。 | 项目管理 Agent、长流程任务自动化。 | *(逻辑类似 Planning)* |
| 10 | **模型上下文协议** | MCP | **标准化接口**：定义 LLM 连接数据源的标准协议。 | 连接本地文件、数据库、Slack 等外部生态。 | *(协议标准，非代码逻辑)* |
| 19 | **评估与监控** | Evaluation | **自动化打分**：使用 LLM-as-a-Judge 评估输出质量。 | 开发测试阶段、线上质量监控。 | *(通常使用 LangSmith 等工具)* |

## 四、 高级交互与策略类 (Interaction & Strategy Patterns)
*处理人机关系及复杂决策策略。*

| 序号 | 模式名称 | 英文名 | 核心逻辑 | 适用场景 | 代码案例参考 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 13 | **人机协同** | HITL | **中断与审批**：关键步骤暂停，等待人类确认或修改。 | 敏感操作（转账、发邮件）、代码部署。 | `hitl_agent.ts` |
| 14 | **知识检索** | RAG | **挂载知识库**：检索相关文档 -> 注入 Prompt -> 生成。 | 企业知识问答、客服机器人。 | `rag_agent.ts` |
| 20 | **优先级排序** | Prioritization | **任务调度**：对用户请求队列进行紧急度排序。 | 繁忙的客服系统、邮件自动分类处理。 | *(可基于 Routing 扩展)* |
| 15 | **智能体通信** | A2A (Agent-to-Agent) | **互操作协议**：不同框架的 Agent 互相调用。 | 跨生态合作（如 OpenAI Agent 调用 Google Agent）。 | *(架构协议)* |
